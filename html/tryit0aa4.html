<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Редактор кода Tryit - v3.6</title>
  <meta name="viewport" content="width=device-width">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" content="../images/w3schools_logo.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="200">
  <meta property="og:image:height" content="200">
  <link rel="stylesheet" href="../w3css/4/w3.css">
  <link rel="stylesheet" href="../styles/tryitstyle.css">
  <link rel="stylesheet" href="../lib/codemirror.css">
  <script src="../lib/codemirror.js"></script>
  <script src="../lib/codemirror_jsx.js"></script>

  <script>
    if (window.addEventListener) {
      window.addEventListener("resize", browserResize);
    } else if (window.attachEvent) {
      window.attachEvent("onresize", browserResize);
    }
    var xbeforeResize = window.innerWidth;

    function browserResize() {
      var afterResize = window.innerWidth;
      if ((xbeforeResize < (970) && afterResize >= (970)) || (xbeforeResize >= (970) && afterResize < (970)) ||
        (xbeforeResize < (728) && afterResize >= (728)) || (xbeforeResize >= (728) && afterResize < (728)) ||
        (xbeforeResize < (468) && afterResize >= (468)) || (xbeforeResize >= (468) && afterResize < (468))) {
        xbeforeResize = afterResize;

        snhb.queue.push(function() {
          snhb.startAuction(["try_it_leaderboard"]);
        });

      }
      if (window.screen.availWidth <= 768) {
        restack(window.innerHeight > window.innerWidth);
      }
      fixDragBtn();
      showFrameSize();
    }
    var fileID = "";
    var loadSave = false;

    function getSavedFile() {
      loadSave = true;
      var htmlCode;
      var paramObj = {};
      paramObj.fileid = "";
      fileID = paramObj.fileid;
      var paramA = JSON.stringify(paramObj);
      var httpA = new XMLHttpRequest();
      httpA.open("POST.html", globalURL, true);
      httpA.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      httpA.onreadystatechange = function() {
        if (httpA.readyState == 4 && httpA.status == 200) {
          document.getElementById("textareaCode").value = httpA.responseText;
          window.editor.getDoc().setValue(httpA.responseText);
          loadSave = false;
        }
      }
      httpA.send(paramA);
    }

    function retheme() {
      var cc = document.body.className;
      if (cc.indexOf("darktheme") > -1) {
        document.body.className = cc.replace("darktheme", "");
      } else {
        document.body.className += " darktheme";
      }
    }
  </script>
  <!--[if lt IE 8]>
<style>
#textareacontainer, #iframecontainer {width:48%;}
#container {height:500px;}
#textarea, #iframe {width:90%;height:450px;}
#textareaCode, #iframeResult {height:450px;}
.stack {display:none;}
</style>
<![endif]-->
</head>

<body>

  <script>
    globalURL = 'https://tryit.w3schools.com/code_datas.php';
  </script>
  <div id="saveModal" class="w3-modal" style="z-index:4">
    <div class="w3-modal-content">
      <div class="w3-display-container">
        <span onclick="hideAndResetModal()" class="w3-button w3-display-topright" style="font-weight:bold;">&times;</span>
        <div id="preSave" class="w3-panel">
          <h2>Сохраните ваш код</h2>
          <p>Если вы нажмете кнопку «Сохранить», ваш код будет сохранен, и вы получите URL, которым вы можете поделиться с другими.</p>
          <div style="height:34px">
            <p>
              <button class="w3-btn w3-green" style="margin-right:15px" title="Сохранить" onclick="saveFile(document.getElementById('textareaCode').value);">Сохранить</button>
              <button class="w3-btn w3-red" title="Выйти" style="margin-right:15px" onclick="hideAndResetModal();">Выйти</button>
            </p>
          </div>
          <p>Нажав кнопку «Сохранить», вы соглашаетесь с нашими <a href="javascript:void(0);" class="w3-hover-text-green" onclick="document.getElementById('saveDisclaimer').style.display='block';">условиями и положениями</a>.</p>
          <p><a href="../default.html" class="w3-button w3-light-grey" onclick="event.preventDefault();displayError()">Сообщить об ошибке</a></p>
          <div id="saveDisclaimer" style="display:none;">
            <p>Весь код в общих файлах предоставлен пользователями и принадлежит постеру.</p>
            <p>Все общие файлы обнародованы. Лицензия не применяется.</p>
            <p>Любой код может быть удален без предупреждения (если он считается оскорбительным, наносящим ущерб или по любой другой причине).</p>
            <p>w3schools.com не несет ответственности за любые потери или ущерб любого рода во время использования предоставленного кода.</p>
          </div>
        </div>
        <div id="errorSave" style="display:none" class="w3-panel">
          <h2>Ваш код не может быть сохранен</h2>
          <p>В коде слишком много символов.</p>
        </div>
        <div id="postSave" class="w3-panel" style="display:none;">
          <div id="saveLoader" class="loader"></div>
          <div id="saveModalSaved" style="display:none">
            <h2>Ваш код был сохранен</h2>
            <p>Файл был сохранен в: <a id="shareLink" class="w3-hover-text-green" href="javascript:void(0);" target="_blank"><span id="shareLinkText"></span></a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="driveSaveModal" class="w3-modal" style="z-index:4">
    <div class="w3-modal-content">
      <div class="w3-display-container">
        <span onclick="resetDriveSaveModal()" class="w3-button w3-display-topright" style="font-weight:bold;">&times;</span>
        <div id="driveText" class="w3-panel w3-large">
          <h2>Сохранить в Google Drive</h2>
          <p>Если у вас есть учетная запись Google, вы можете сохранить этот код на Google Диске.</p>
          <p>Google попросит вас подтвердить доступ к Google Диску.</p>
          <p><label class="w3-text-black"><b>Сохранить файл как:</b></label>
            <input class="w3-input w3-border" type="text" id="googleFileName" value="tryhtml_default">
            <button class="w3-button w3-light-grey w3-hover-grey w3-hover-text-white w3-margin-top" title="Сохранить файл на Google Диске" onclick="handleAuthClick(event,'save')"><img style="margin-right:5px" alt="Сохранить файл на Google Диске" title="Сохранить файл на Google Диске" src="../images/driveicon.png">Сохранить файл</button>
        </div>
        <div class="w3-panel w3-large loader" id="driveSavedPanel" style="display:none">
          <p id="driveSavedText"></p>
        </div>
      </div>
    </div>
  </div>

  <div id="driveLoadModal" class="w3-modal" style="z-index:4">
    <div class="w3-modal-content">
      <div class="w3-display-container">
        <span onclick="resetDriveLoadModal()" class="w3-button w3-display-topright" style="font-weight:bold;">&times;</span>
        <div class="w3-panel w3-large">
          <h2>Открыть с Google Диска</h2>
          <p>Если вы сохранили файл на Google Диске, вы можете открыть его здесь:</p>
          <p><button class="w3-button w3-light-grey w3-hover-grey w3-hover-text-white" title="Open file from Google Drive" onclick="handleAuthClick(event,'open')"><img style="margin-right:5px" alt="Открыть файл с Google Диска" title="Открыть файл с Google Диска" src="../images/driveicon.png">Открыть файл</button></p>
        </div>
      </div>
    </div>
  </div>

  <div class="trytopnav">
    <div class="w3-bar" style="overflow:auto">
      <a id="tryhome" href="../index.html" target="_blank" title="Главная" class="w3-button w3-bar-item topnav-icons fa fa-home" style="font-size:28px;margin-top:-2px"></a>
      <a href="javascript:void(0);" onclick="openMenu()" id="menuButton" title="Открыть меню" class="w3-dropdown-click w3-button w3-bar-item topnav-icons fa fa-menu" style="font-size:28px;margin-top:-2px"></a>
      <a href="javascript:void(0);" onclick="click_savebtn()" title="Сохранить" class="w3-button w3-bar-item topnav-icons fa fa-save" style="font-size:28px;margin-top:-2px"></a>
      <a href="javascript:void(0);" onclick="restack(currentStack)" title="Изменить ориентацию" class="w3-button w3-bar-item topnav-icons fa fa-rotate" style="font-size:28px;margin-top:-2px"></a>
      <a href="javascript:void(0);" onclick="retheme()" title="Изменить тему" class="w3-button w3-bar-item topnav-icons fa fa-adjust" style="font-size:28px;margin-top:-2px"></a>
      <button class="w3-button w3-bar-item w3-green w3-hover-white w3-hover-text-green" style="font-size:16px" onclick="submitTryit(1);snhb.startAuction(['try_it_leaderboard']);">Выполнить &raquo;</button>
      <span class="w3-right w3-hide-medium w3-hide-small" style="padding:8px 8px 8px 8px;display:block"></span>
      <span class="w3-right w3-hide-small" style="padding:8px 0;display:block;float:right;"><span id="framesize"></span></span>
    </div>

  </div>
  <div id="shield"></div>

  <a href="javascript:void(0)" id="dragbar"></a>
  <div id="container">
    <div id="navbarDropMenu" class="w3-dropdown-content w3-bar-block w3-border" style="z-index:5">
      <span onclick="openMenu()" class="w3-button w3-display-topright w3-transparent w3-hover-dark-grey" title="Открыть меню" style="font-weight:bold;padding-top:10px;padding-bottom:11px;">&times;</span>
      <div class="w3-bar-block">
        <a class="w3-bar-item w3-button" href='javascript:void(0);' title="Изменить ориентацию" onclick="openMenu();restack(currentStack)"><i class="fa fa-rotate" style="font-size:26px;margin-left:-4px;margin-right:8px"></i><span style="position:relative;top:-4px;left:2px;">Изменить ориентацию</span></a>
        <a class="w3-bar-item w3-button" href="javascript:void(0);" title="Save" onclick="openMenu();click_savebtn()"><i class="fa fa-save" style="font-size:26px;margin-right:10px;"></i><span style="position:relative;top:-4px;left:2px;">Сохранить код</span></a>
        <a class="w3-bar-item w3-button" href='javascript:void(0);' id="saveGDriveBtn" title="Сохранить на Google Диске" onclick="openMenu();click_google_savebtn()"><img src="../images/driveicon_32.png" alt="Сохранить на Google Диске" title="Сохранить на Google Диске" style="margin-right:10px;width:24px;"><span style="position:relative;left:1px;">Сохранить на Google Диске</span></a>
        <a class="w3-bar-item w3-button" href='javascript:void(0);' id="loadGDriveBtn" title="Загрузить с Google Диска" onclick="openMenu();click_google_loadbtn()"><img src="../images/driveicon_32.png" alt="Загрузить с Google Диска" title="Загрузить с Google Диска" style="margin-right:10px;width:24px;"><span style="position:relative;left:1px;">Загрузить с Google Диска</span></a>
        <a class="w3-bar-item w3-button" href='javascript:void(0);' title="Изменить тему" onclick="openMenu();retheme()"><i class="fa fa-adjust" style="font-size:26px;margin-right:8px"></i><span style="position:relative;top:-4px;left:2px;">Сменить тему, Темная/Светлая</span></a>
      </div>
      <footer class="w3-container w3-small w3-light-gray">
        <p><a style="display:inline;padding:0;" href="../about/about_privacy.html" target="_blank" onclick="openMenu();" class="w3-hover-none w3-hover-text-green">Политика конфиденциальности</a> и
          <a style="display:inline;padding:0;" href="../about/about_copyright.html" target="_blank" onclick="openMenu();" class="w3-hover-none w3-hover-text-green">Copyright 1999-2019</a></p>
      </footer>
    </div>
    <div id="menuOverlay" class="w3-overlay w3-transparent" style="cursor:pointer;z-index:4"></div>
    <div id="textareacontainer">
      <div id="textarea">
        <div id="textareawrapper">

          <!--Код на странице-->
          <textarea autocomplete="off" id="textareaCode" wrap="logical" spellcheck="false"><!DOCTYPE html>
<html>
<body>

<h2>Альтернативный текст</h2>

<p>Атрибут alt должен отражать содержимое изображения, поэтому пользователи, которые не могут видеть изображение, получают представление о том, что содержит изображение:</p>

<img src="img_chania.jpg" alt="Цветы в Ханье" width="460" height="345">

</body>
</html>
</textarea>
          <!-- / Код на странице-->

          <form id="codeForm" autocomplete="off" style="margin:0px;display:none;">
            <input type="hidden" name="code" id="code" />
          </form>
        </div>
      </div>
    </div>
    <div id="iframecontainer">
      <div id="iframe">
        <div id="iframewrapper"></div>
      </div>
    </div>
  </div>
  <div id="err_form" class="w3-modal" style="z-index:4">
    <div class="w3-modal-content w3-display-container">
      <span onclick="document.getElementById('err_form').style.display='none'" class="w3-button w3-display-topright w3-text-white w3-padding w3-green" style="font-weight:bold;">&times;</span>
      <div class="w3-container w3-green">
        <h2>Сообщить о проблеме:</h2>
      </div>
      <form class="w3-container">
        <p><label for="err_email">Ваш E-mail:</label>
          <input class="w3-input w3-border" type="text" style="width:100%" id="err_email" name="err_email">
        </p>
        <p>
          <label for="err_email">Адрес страницы:</label>
          <input class="w3-input w3-border" type="text" style="width:100%" id="err_url" name="err_url" disabled="disabled">
        </p>
        <p>
          <label for="err_email">Описание:</label>
          <textarea rows="10" class="w3-input w3-border" id="err_desc" name="err_desc" style="width:100%;resize:vertical"></textarea>
        </p>
        <button class="w3-btn w3-right w3-green w3-margin-bottom" type="button" onclick="sendErr()">Отправить</button>
      </form>

    </div>
  </div>
  <script>
    submitTryit()

    function submitTryit(n) {
      if (window.editor) {
        window.editor.save();
      }
      var text = document.getElementById("textareaCode").value;
      var ifr = document.createElement("iframe");
      ifr.setAttribute("frameborder", "0");
      ifr.setAttribute("id", "iframeResult");
      ifr.setAttribute("name", "iframeResult");
      document.getElementById("iframewrapper").innerHTML = "";
      document.getElementById("iframewrapper").appendChild(ifr);
      if (loadSave == true) {
        ifr.setAttribute("src", "../code/opentext.html");
      } else if (fileID != "" && loadSave == false) {
        var t = text;
        t = t.replace(/=/gi, "w3equalsign");
        t = t.replace(/\+/gi, "w3plussign");
        var pos = t.search(/script/i)
        while (pos > 0) {
          t = t.substring(0, pos) + "w3" + t.substr(pos, 3) + "w3" + t.substr(pos + 3, 3) + "tag" + t.substr(pos + 6);
          pos = t.search(/script/i);
        }
        document.getElementById("code").value = t;
        document.getElementById("codeForm").action = "https://tryit.w3schools.com/tryit_view.php?x=" + Math.random();
        document.getElementById('codeForm').method = "post";
        document.getElementById('codeForm').acceptCharset = "utf-8";
        document.getElementById('codeForm').target = "iframeResult";
        document.getElementById("codeForm").submit();
      } else {
        var ifrw = (ifr.contentWindow) ? ifr.contentWindow : (ifr.contentDocument.document) ? ifr.contentDocument.document : ifr.contentDocument;
        ifrw.document.open();
        ifrw.document.write(text);
        ifrw.document.close();
        //23.02.2016: contentEditable установлен в true, чтобы исправить выделение текста (ошибку) в Firefox.
        //(и вернуться к false, чтобы предотвратить редактирование содержимого)
        //(Чтобы воспроизвести ошибку: Выберите текст в окне результатов с и без приведенных ниже операторов contentEditable.)
        if (ifrw.document.body && !ifrw.document.body.isContentEditable) {
          ifrw.document.body.contentEditable = true;
          ifrw.document.body.contentEditable = false;
        }
      }
    }
    var currentStack = true;
    if ((window.screen.availWidth <= 768 && window.innerHeight > window.innerWidth) || "" == " horizontal") {
      restack(true);
    }

    function restack(horizontal) {
      var tc, ic, t, i, c, f, sv, sh, d, height, flt, width;
      tc = document.getElementById("textareacontainer");
      ic = document.getElementById("iframecontainer");
      t = document.getElementById("textarea");
      i = document.getElementById("iframe");
      c = document.getElementById("container");
      sv = document.getElementById("stackV");
      sh = document.getElementById("stackH");
      tc.className = tc.className.replace("horizontal", "");
      ic.className = ic.className.replace("horizontal", "");
      t.className = t.className.replace("horizontal", "");
      i.className = i.className.replace("horizontal", "");
      c.className = c.className.replace("horizontal", "");
      if (sv) {
        sv.className = sv.className.replace("horizontal", "")
      };
      if (sv) {
        sh.className = sh.className.replace("horizontal", "")
      };
      stack = "";
      if (horizontal) {
        tc.className = tc.className + " horizontal";
        ic.className = ic.className + " horizontal";
        t.className = t.className + " horizontal";
        i.className = i.className + " horizontal";
        c.className = c.className + " horizontal";
        if (sv) {
          sv.className = sv.className + " horizontal"
        };
        if (sv) {
          sh.className = sh.className + " horizontal"
        };
        stack = " horizontal";
        document.getElementById("textareacontainer").style.height = "50%";
        document.getElementById("iframecontainer").style.height = "50%";
        document.getElementById("textareacontainer").style.width = "100%";
        document.getElementById("iframecontainer").style.width = "100%";
        currentStack = false;
      } else {
        document.getElementById("textareacontainer").style.height = "100%";
        document.getElementById("iframecontainer").style.height = "100%";
        document.getElementById("textareacontainer").style.width = "50%";
        document.getElementById("iframecontainer").style.width = "50%";
        currentStack = true;
      }
      fixDragBtn();
      showFrameSize();
    }

    function showFrameSize() {
      var t;
      var width, height;
      width = Number(w3_getStyleValue(document.getElementById("iframeResult"), "width").replace("px", "")).toFixed();
      height = Number(w3_getStyleValue(document.getElementById("iframeResult"), "height").replace("px", "")).toFixed();
      document.getElementById("framesize").innerHTML = "Result Size: <span>" + width + " x " + height + "</span>";
    }
    var dragging = false;
    var stack;

    function fixDragBtn() {
      var textareawidth, leftpadding, dragleft, containertop, buttonwidth
      var containertop = Number(w3_getStyleValue(document.getElementById("container"), "top").replace("px", ""));
      if (stack != " horizontal") {
        document.getElementById("dragbar").style.width = "5px";
        textareasize = Number(w3_getStyleValue(document.getElementById("textareawrapper"), "width").replace("px", ""));
        leftpadding = Number(w3_getStyleValue(document.getElementById("textarea"), "padding-left").replace("px", ""));
        buttonwidth = Number(w3_getStyleValue(document.getElementById("dragbar"), "width").replace("px", ""));
        textareaheight = w3_getStyleValue(document.getElementById("textareawrapper"), "height");
        dragleft = textareasize + leftpadding + (leftpadding / 2) - (buttonwidth / 2);
        document.getElementById("dragbar").style.top = containertop + "px";
        document.getElementById("dragbar").style.left = dragleft + "px";
        document.getElementById("dragbar").style.height = textareaheight;
        document.getElementById("dragbar").style.cursor = "col-resize";

      } else {
        document.getElementById("dragbar").style.height = "5px";
        if (window.getComputedStyle) {
          textareawidth = window.getComputedStyle(document.getElementById("textareawrapper"), null).getPropertyValue("height");
          textareaheight = window.getComputedStyle(document.getElementById("textareawrapper"), null).getPropertyValue("width");
          leftpadding = window.getComputedStyle(document.getElementById("textarea"), null).getPropertyValue("padding-top");
          buttonwidth = window.getComputedStyle(document.getElementById("dragbar"), null).getPropertyValue("height");
        } else {
          dragleft = document.getElementById("textareawrapper").currentStyle["width"];
        }
        textareawidth = Number(textareawidth.replace("px", ""));
        leftpadding = Number(leftpadding.replace("px", ""));
        buttonwidth = Number(buttonwidth.replace("px", ""));
        dragleft = containertop + textareawidth + leftpadding + (leftpadding / 2);
        document.getElementById("dragbar").style.top = dragleft + "px";
        document.getElementById("dragbar").style.left = "5px";
        document.getElementById("dragbar").style.width = textareaheight;
        document.getElementById("dragbar").style.cursor = "row-resize";
      }
    }

    function dragstart(e) {
      e.preventDefault();
      dragging = true;
      var main = document.getElementById("iframecontainer");
    }

    function dragmove(e) {
      if (dragging) {
        document.getElementById("shield").style.display = "block";
        if (stack != " horizontal") {
          var percentage = (e.pageX / window.innerWidth) * 100;
          if (percentage > 5 && percentage < 98) {
            var mainPercentage = 100 - percentage;
            document.getElementById("textareacontainer").style.width = percentage + "%";
            document.getElementById("iframecontainer").style.width = mainPercentage + "%";
            fixDragBtn();
          }
        } else {
          var containertop = Number(w3_getStyleValue(document.getElementById("container"), "top").replace("px", ""));
          var percentage = ((e.pageY - containertop + 20) / (window.innerHeight - containertop + 20)) * 100;
          if (percentage > 5 && percentage < 98) {
            var mainPercentage = 100 - percentage;
            document.getElementById("textareacontainer").style.height = percentage + "%";
            document.getElementById("iframecontainer").style.height = mainPercentage + "%";
            fixDragBtn();
          }
        }
        showFrameSize();
      }
    }

    function dragend() {
      document.getElementById("shield").style.display = "none";
      dragging = false;
      if (window.editor) {
        window.editor.refresh();
      }
    }
    if (window.addEventListener) {
      document.getElementById("dragbar").addEventListener("mousedown", function(e) {
        dragstart(e);
      });
      document.getElementById("dragbar").addEventListener("touchstart", function(e) {
        dragstart(e);
      });
      window.addEventListener("mousemove", function(e) {
        dragmove(e);
      });
      window.addEventListener("touchmove", function(e) {
        dragmove(e);
      });
      window.addEventListener("mouseup", dragend);
      window.addEventListener("touchend", dragend);
      window.addEventListener("load", fixDragBtn);
      window.addEventListener("load", showFrameSize);
    }

    function click_savebtn() {
      if (window.editor) {
        window.editor.save();
      }
      document.getElementById('saveModal').style.display = 'block';
    }

    function click_google_savebtn() {
      if (window.editor) {
        window.editor.save();
      }
      document.getElementById('driveSaveModal').style.display = 'block'
    }

    function click_google_loadbtn() {
      document.getElementById('driveLoadModal').style.display = 'block'
    }


    function colorcoding() {
      var ua = navigator.userAgent;
      //Opera Mini обновляет страницу при попытке редактировать текстовую область.
      if (ua && ua.toUpperCase().indexOf("OPERA MINI") > -1) {
        return false;
      }
      window.editor = CodeMirror.fromTextArea(document.getElementById("textareaCode"), {
        mode: "text/html",
        htmlMode: true,
        lineWrapping: true,
        smartIndent: false,
        addModeClass: true
      });
      //  window.editor.on("change", function () {window.editor.save();});
    }
    colorcoding();

    function w3_getStyleValue(elmnt, style) {
      if (window.getComputedStyle) {
        return window.getComputedStyle(elmnt, null).getPropertyValue(style);
      } else {
        return elmnt.currentStyle[style];
      }
    }
    //СОХРАНИТЬ И ОТКРЫТЬ СКРИПТ
    var oauthToken;
    var userAction;
    var pickerApiLoaded;
    var developerKey = 'AIzaSyAMZDPXiGcCNWs1UCWG9LS6kkW5YiABfJ0';
    var CLIENT_ID = '451843133508-ckbr5r6ch1ofqbmh87oll4u6ltinqv2t.apps.googleusercontent.com';
    var SCOPES = ['https://www.googleapis.com/auth/drive.file'];

    //Проверьте, авторизовал ли данный пользователь это приложение
    function checkAuth() {
      gapi.auth.authorize({
        'client_id': CLIENT_ID,
        'scope': SCOPES.join(' '),
        'immediate': true
      }, handleAuthResult);
    }

    //Обработка ответа от сервера авторизации
    function handleAuthResult(authResult) {
      if (authResult && !authResult.error) {
        oauthToken = authResult.access_token;
        loadApi();
      }
    }

    //Инициировать поток аутентификации в ответ на нажатие пользователем кнопки авторизации
    function handleAuthClick(event, userClick) {
      userAction = userClick;
      gapi.auth.authorize({
          client_id: CLIENT_ID,
          scope: SCOPES,
          immediate: false
        },
        handleAuthResult);
      return false;
    }

    // Загрузить библиотеку API
    function loadApi() {
      gapi.client.load('drive', 'v3');
      gapi.load('picker', {
        'callback': onPickerApiLoad
      });
    }

    function onPickerApiLoad() {
      pickerApiLoaded = true;
      if (userAction == "save") {
        userAction = "";
        document.getElementById('driveText').style.display = 'none';
        document.getElementById('driveSavedPanel').style.display = 'block';
        createFileWithHTMLContent(document.getElementById('googleFileName').value, document.getElementById('textareaCode').value)
      }
      if (userAction == "open") {
        userAction = "";
        createPicker();
      }
    }

    // Создание и рендеринг объекта Picker для выбора файла HTML
    function createPicker() {
      if (pickerApiLoaded) {
        var view = new google.picker.View(google.picker.ViewId.DOCS);
        view.setMimeTypes("text/html");
        var picker = new google.picker.PickerBuilder().
        addView(view).
        setOAuthToken(oauthToken).
        setDeveloperKey(developerKey).
        setCallback(pickerCallback).
        build();
        picker.setVisible(true);
      }
    }
    // Поместите содержимое файла в редактор tryit
    function pickerCallback(data) {
      var docID = '';
      if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
        var doc = data[google.picker.Response.DOCUMENTS][0];
        docID = doc[google.picker.Document.ID];
        getContentOfFile(docID);
      }
    }

    //Получить содержимое
    function getContentOfFile(theID) {
      gapi.client.request({
        'path': '/drive/v2/files/' + theID,
        'method': 'GET',
        callback: function(theResponseJS, theResponseTXT) {
          var myToken = gapi.auth.getToken();
          var myXHR = new XMLHttpRequest();
          myXHR.open('GET.html', theResponseJS.downloadUrl, true);
          myXHR.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token);
          myXHR.onreadystatechange = function(theProgressEvent) {
            if (myXHR.readyState == 4) {
              if (myXHR.status == 200) {
                var code = myXHR.response;
                document.getElementById("textareaCode").value = code;
                window.editor.getDoc().setValue(code);
                submitTryit(1);
                resetDriveLoadModal();
              }
            }
          }
          myXHR.send();
        }
      });
    }

    var createFileWithHTMLContent = function(name, data, callback) {
      const boundary = '-------314159265358979323846';
      const delimiter = "\r\n--" + boundary + "\r\n";
      const close_delim = "\r\n--" + boundary + "--";
      const contentType = 'text/html';

      var metadata = {
        'name': name,
        'mimeType': contentType
      };

      var multipartRequestBody =
        delimiter +
        'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(metadata) +
        delimiter +
        'Content-Type: ' + contentType + '\r\n\r\n' +
        data +
        close_delim;

      var request = gapi.client.request({
        'path': '/upload/drive/v3/files',
        'method': 'POST',
        'params': {
          'uploadType': 'multipart'
        },
        'headers': {
          'Content-Type': 'multipart/related; boundary="' + boundary + '"'
        },
        'body': multipartRequestBody
      });
      if (!callback) {
        callback = function(file) {
          console.log(file);
          document.getElementById("driveSavedText").innerHTML = file.name + " saved in Google Drive";
          document.getElementById("driveSavedPanel").className = "w3-panel w3-large";
        };
      }
      request.execute(callback);
    }

    if (navigator.userAgent.indexOf("MSIE") > 0 || navigator.userAgent.indexOf("Edge") > 0) {
      document.getElementById("saveGDriveBtn").style.display = "none";
      document.getElementById("loadGDriveBtn").style.display = "none";
    }


    function resetDriveSaveModal() {
      document.getElementById('driveSavedText').innerHTML = '';
      document.getElementById('driveSaveModal').style.display = 'none'
      document.getElementById('driveSavedPanel').style.display = 'none'
      document.getElementById('driveText').style.display = 'block'
      document.getElementById("driveSavedPanel").className = "w3-panel w3-large loader";
    }

    function resetDriveLoadModal() {
      document.getElementById('driveLoadModal').style.display = 'none'
    }

    function saveFile(code) {
      document.getElementById('preSave').style.display = 'none';
      if (code.length > 20000) {
        document.getElementById('errorSave').style.display = 'block';
        return;
      }
      document.getElementById('postSave').style.display = 'block';
      var paramObj = {};
      paramObj.code = code;
      var paramB = JSON.stringify(paramObj);
      var httpB = new XMLHttpRequest();
      httpB.open("POST.html", globalURL, true);

      httpB.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

      httpB.onreadystatechange = function() {
        if (httpB.readyState == 4 && httpB.status == 200) {
          if (httpB.responseText.substr(0, 2) == "OK") {
            var getId = httpB.responseText.substr(2);
            document.getElementById("shareLink").href = "../code/tryit1b9e.html?filename=" + getId;
            document.getElementById("shareLinkText").innerHTML = "../code/tryit1b9e.html?filename=" + getId;
            document.getElementById('saveLoader').style.display = "none";
            document.getElementById("saveModalSaved").style.display = "block";
          }
        }
      }
      httpB.send(paramB);
    }

    function hideAndResetModal() {
      document.getElementById("saveModal").style.display = "none";
      document.getElementById('preSave').style.display = "block";
      document.getElementById('errorSave').style.display = "none";
      document.getElementById('postSave').style.display = "none";
      document.getElementById("saveModalSaved").style.display = "none";
      document.getElementById('saveDisclaimer').style.display = "none";
      document.getElementById('saveLoader').style.display = "block";
    }

    var addr = document.location.href;

    function displayError() {
      document.getElementById("err_url").value = addr;
      document.getElementById("err_form").style.display = "block";
      document.getElementById("err_email").focus();
      hideSent();
    }

    function hideError() {
      document.getElementById("err_form").style.display = "none";
    }

    function hideSent() {
      document.getElementById("err_sent").style.display = "none";
    }

    function sendErr() {
      var xmlhttp;
      var err_url = document.getElementById("err_url").value;
      var err_email = document.getElementById("err_email").value;
      var err_desc = document.getElementById("err_desc").value;
      if (window.XMLHttpRequest) { // код для IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
      } else { // код для IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.open("POST.html", "../err_sup.html", true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
      document.getElementById("err_desc").value = "";
      hideError();
      document.getElementById("err_sent").style.display = "block";
    }

    function openMenu() {
      var x = document.getElementById("navbarDropMenu");
      var y = document.getElementById("menuOverlay");
      var z = document.getElementById("menuButton");
      if (z.className.indexOf("w3-text-gray") == -1) {
        z.className += " w3-text-gray";
      } else {
        z.className = z.className.replace(" w3-text-gray", "");
      }
      if (z.className.indexOf("w3-gray") == -1) {
        z.className += " w3-gray";
      } else {
        z.className = z.className.replace(" w3-gray", "");
      }
      if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
      } else {
        x.className = x.className.replace(" w3-show", "");
      }
      if (y.className.indexOf("w3-show") == -1) {
        y.className += " w3-show";
      } else {
        y.className = y.className.replace(" w3-show", "");
      }
    }
    // Когда пользователь нажимает в любом месте за пределами модального, закройте его
    window.onclick = function(event) {
      if (event.target == document.getElementById("saveModal")) {
        hideAndResetModal();
      }
      if (event.target == document.getElementById("driveSaveModal")) {
        resetDriveSaveModal();
      }
      if (event.target == document.getElementById("driveLoadModal")) {
        resetDriveLoadModal();
      }
      if (event.target == document.getElementById("menuOverlay")) {
        openMenu();
      }

    }
  </script>

  <script src="../apis.google.com/js/clientba50.js?onload=checkAuth"></script>
</body>

</html>
